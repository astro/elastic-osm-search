#!/bin/sh

HOST=localhost:9200
[ "x$1" = "x" ] || HOST=$1

# Attention: drops index!
curl -XDELETE "http://$HOST/osm"

curl -XPOST "http://$HOST/osm"
for t in node way relation; do
    curl -XPUT "http://$HOST/osm/$t/_mapping" -d '
{
    "'$t'" : {
        "_id": { "path": "id" },
        "_all" : {"enabled" : true},
        "date_detection" : false,
        "numeric_detection": false,
        "properties" : {
            "location" : {"type" : "geo_shape", "precision": "1m" },
            "lat" : { "type": "double", "index": "no" },
            "lon" : { "type": "double", "index": "no" }
        }
    }
}'
done

exit 0

"key": "access",
"key": "accuracy:meters",
"key": "addr:city",
"key": "addr:city:de",
"key": "addr:conscriptionnumber",
"key": "addr:country",
"key": "addr:county",
"key": "addr:district",
"key": "addr:full",
"key": "addr:housename",
"key": "addr:housenumber",
"key": "addr:inclusion",
"key": "addr:interpolation",
"key": "addr:place",
"key": "addr:postcode",
"key": "addr:province",
"key": "addr:provisionalnumber",
"key": "addr:region",
"key": "addr:state",
"key": "addr:street",
"key": "addr:street:de",
"key": "addr:street:name",
"key": "addr:streetnumber",
"key": "addr:street:prefix",
"key": "addr:street:type",
"key": "addr:suburb",
"key": "admin_level",
"key": "adr_les",
"key": "aerialway",
"key": "aeroway",
"key": "alt_name",
"key": "amenity",
"key": "area",
"key": "atm",
"key": "attribution",
"key": "backrest",
"key": "barrier",
"key": "bench",
"key": "bicycle",
"key": "boat",
"key": "border_type",
"key": "boundary",
"key": "brand",
"key": "bridge",
"key": "building",
"key": "building:colour",
"key": "building:fireproof",
"key": "building:flats",
"key": "building:levels",
"key": "building:material",
"key": "building:part",
"key": "building:roof",
"key": "building:roof:shape",
"key": "building:ruian:type",
"key": "building:structure",
"key": "building:type",
"key": "building:type:pl",
"key": "building:usage:pl",
"key": "building:use",
"key": "building:use:pl",
"key": "bus",
"key": "cables",
"key": "capacity",
"key": "circumference",
"key": "colour",
"key": "comment",
"key": "condition",
"key": "construction",
"key": "contact:phone",
"key": "converted_by",
"key": "covered",
"key": "craft",
"key": "crop",
"key": "crossing",
"key": "crossing_ref",
"key": "cuisine",
"key": "cycleway",
"key": "dataset",
"key": "denomination",
"key": "denotation",
"key": "description",
"key": "design",
"key": "designation",
"key": "destination",
"key": "diameter_crown",
"key": "ele",
"key": "electrified",
"key": "email",
"key": "embankment",
"key": "emergency",
"key": "entrance",
"key": "fee",
"key": "fence_type",
"key": "fire_hydrant:diameter",
"key": "fire_hydrant:position",
"key": "fire_hydrant:type",
"key": "fixme",
"key": "FIXME",
"key": "FLATE",
"key": "foot",
"key": "footway",
"key": "frequency",
"key": "gauge",
"key": "generator:source",
"key": "genus",
"key": "geological",
"key": "golf",
"key": "gst:feat_id",
"key": "height",
"key": "HFCS",
"key": "highway",
"key": "hiking",
"key": "historic",
"key": "horse",
"key": "import",
"key": "import_ref",
"key": "import_uuid",
"key": "incline",
"key": "information",
"key": "intermittent",
"key": "int_name",
"key": "int_ref",
"key": "is_in",
"key": "is_in:city",
"key": "is_in:continent",
"key": "is_in:country",
"key": "is_in:country_code",
"key": "is_in:county",
"key": "is_in:municipality",
"key": "is_in:province",
"key": "is_in:region",
"key": "is_in:state",
"key": "is_in:state_code",
"key": "junction",
"key": "landuse",
"key": "lanes",
"key": "layer",
"key": "lcn",
"key": "leaf_type",
"key": "leisure",
"key": "length",
"key": "length_unit",
"key": "level",
"key": "lit",
"key": "living_street",
"key": "local_ref",
"key": "location",
"key": "loc_ref",
"key": "lot_description",
"key": "lot_type",
"key": "man_made",
"key": "Man_made",
"key": "material",
"key": "maxspeed",
"key": "maxspeed:note",
"key": "maxweight",
"key": "military",
"key": "motorcar",
"key": "motorcycle",
"key": "motorroad",
"key": "motor_vehicle",
"key": "mtb:scale",
"key": "mvdgis:cod_nombre",
"key": "mvdgis:padron",
"key": "name",
"key": "name:botanical",
"key": "name:de",
"key": "name:en",
"key": "natural",
"key": "network",
"key": "noexit",
"key": "OBJTYPE",
"key": "odbl",
"key": "office",
"key": "official_name",
"key": "old_name",
"key": "old_railway_operator",
"key": "old_ref",
"key": "oneway",
"key": "opening_hours",
"key": "operator",
"key": "OPPDATERIN",
"key": "other_use",
"key": "owner",
"key": "parking",
"key": "phone",
"key": "piste:difficulty",
"key": "piste:type",
"key": "place",
"key": "places",
"key": "population",
"key": "population:date",
"key": "postal_code",
"key": "power",
"key": "primary_use",
"key": "psv",
"key": "public_transport",
"key": "railway",
"key": "religion",
"key": "residential",
"key": "restriction",
"key": "review",
"key": "roof:colour",
"key": "roof:height",
"key": "roof:levels",
"key": "roof:material",
"key": "roof:orientation",
"key": "roof:shape",
"key": "route",
"key": "route_ref",
"key": "sac_scale",
"key": "seamark:name",
"key": "seamark:type",
"key": "seats",
"key": "secondary_use",
"key": "segregated",
"key": "service",
"key": "shelter",
"key": "shop",
"key": "sidewalk",
"key": "site",
"key": "SK53_bulk:load",
"key": "smoothness",
"key": "species",
"key": "species:de",
"key": "sport",
"key": "stream",
"key": "surface",
"key": "tactile_paving",
"key": "taxon",
"key": "toll",
"key": "tourism",
"key": "tower:type",
"key": "tracks",
"key": "tracktype",
"key": "traffic_calming",
"key": "traffic_sign",
"key": "trail_visibility",
"key": "trees",
"key": "tunnel",
"key": "turn:lanes",
"key": "type",
"key": "url",
"key": "usage",
"key": "vehicle",
"key": "voltage",
"key": "wall",
"key": "water",
"key": "waterway",
"key": "website",
"key": "wetland",
"key": "wheelchair",
"key": "width",
"key": "wikipedia",
"key": "wood",
"key": "zone",
